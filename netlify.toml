[build]
  command = "npm run build"
  publish = "dist"

# --- Host canonicalization (non-www -> www) ---
[[redirects]]
  from = "/*"
  to = "https://www.fenixflooring.com/:splat"
  status = 301
  force = true
  conditions = { Host = ["fenixflooring.com"] }

# --- Block Netlify subdomain from becoming a crawl source ---
[[redirects]]
  from = "https://fenix-flooring.netlify.app/*"
  to = "https://www.fenixflooring.com/:splat"
  status = 301
  force = true

# --- Fix malformed UTM links (missing ? before query params) ---
[[redirects]]
  from = "/utm_source=*"
  to = "/?utm_source=:splat"
  status = 301

# --- Branded short links (LinkedIn first-comment links) ---
# Inbound tracking links for LinkedIn comments/posts.
# Using 302 while validating; switch to 301 once confirmed correct.
# force = true ensures these fire before any static-file fallback.
# Each path has a trailing-slash variant for resilience.

[[redirects]]
  from = "/go/linkedin"
  to = "https://www.fenixflooring.com/?utm_source=linkedin&utm_medium=organic_social&utm_campaign=linkedin_company_page&utm_content=comment_link"
  status = 302
  force = true

[[redirects]]
  from = "/go/linkedin/"
  to = "https://www.fenixflooring.com/?utm_source=linkedin&utm_medium=organic_social&utm_campaign=linkedin_company_page&utm_content=comment_link"
  status = 302
  force = true

[[redirects]]
  from = "/go/linkedin/website-launch"
  to = "https://www.fenixflooring.com/?utm_source=linkedin&utm_medium=organic_social&utm_campaign=website_launch&utm_content=comment_link"
  status = 302
  force = true

[[redirects]]
  from = "/go/linkedin/website-launch/"
  to = "https://www.fenixflooring.com/?utm_source=linkedin&utm_medium=organic_social&utm_campaign=website_launch&utm_content=comment_link"
  status = 302
  force = true

[[redirects]]
  from = "/go/linkedin/communication-fast"
  to = "https://www.fenixflooring.com/?utm_source=linkedin&utm_medium=organic_social&utm_campaign=communication_fast_response&utm_content=comment_link"
  status = 302
  force = true

[[redirects]]
  from = "/go/linkedin/communication-fast/"
  to = "https://www.fenixflooring.com/?utm_source=linkedin&utm_medium=organic_social&utm_campaign=communication_fast_response&utm_content=comment_link"
  status = 302
  force = true

[[redirects]]
  from = "/go/linkedin/high-end-residential"
  to = "https://www.fenixflooring.com/?utm_source=linkedin&utm_medium=organic_social&utm_campaign=high_end_residential&utm_content=comment_link"
  status = 302
  force = true

[[redirects]]
  from = "/go/linkedin/high-end-residential/"
  to = "https://www.fenixflooring.com/?utm_source=linkedin&utm_medium=organic_social&utm_campaign=high_end_residential&utm_content=comment_link"
  status = 302
  force = true

# --- Outbound social profile links ---
# Used by footer and contact page LinkedIn icons.
# 302 preserves UTM query params for analytics before sending user offsite.

[[redirects]]
  from = "/go/to-linkedin"
  to = "https://www.linkedin.com/company/fenix-flooring"
  status = 302
  force = true

[[redirects]]
  from = "/go/to-linkedin/"
  to = "https://www.linkedin.com/company/fenix-flooring"
  status = 302
  force = true

# --- Content redirects ---
[[redirects]]
  from = "/resources/commercial-flooring-cost-guide/"
  to = "/resources/commercial-flooring-cost-guide-in-se-pa-installed-pricing-and-drivers/"
  status = 301
